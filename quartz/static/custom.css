/* custom.css */

/************************************************ Cho phép cuộn ************************************************/

/* BƯỚC 1: Buộc HTML và BODY cho phép cuộn toàn trang */
html {
    height: 100% !important;
    overflow-y: scroll !important; /* Buộc thanh cuộn luôn hiển thị và cho phép cuộn */
    -webkit-overflow-scrolling: touch; /* Cuộn mượt trên thiết bị di động */
}

body {
    min-height: 100% !important; /* Đảm bảo body có thể mở rộng theo nội dung */
    height: auto !important;     /* Cho phép body tự điều chỉnh chiều cao */
    overflow: visible !important; /* Để nội dung được hiển thị và cuộn bởi html */
}

/* BƯỚC 2: Điều chỉnh các container gốc của Quartz để chúng linh hoạt */
#quartz-root.page, /* Sử dụng selector đặc hiệu hơn */
#quartz-body {
    height: auto !important;     /* Cho phép tự điều chỉnh chiều cao theo nội dung con */
    min-height: 100vh !important; /* Đảm bảo chiều cao tối thiểu bằng viewport */
    overflow: visible !important; /* Để nội dung tràn ra và được cuộn bởi html/body */

    /* Ghi đè grid-template-rows cố định nếu nó gây vấn đề */
    /* Nếu sau bước này vẫn không cuộn, hãy thử uncomment dòng dưới */
    grid-template-rows: auto 1fr auto auto !important; /* Cột giữa linh hoạt hơn, các cột khác auto */
}


/* BƯỚC 3: TÁC ĐỘNG TRỰC TIẾP VÀO PHẦN TỬ SIDEBAR BẰNG SELECTOR CHÍNH XÁC CỦA QUARTZ */
.page > #quartz-body .sidebar.right { /* DÙNG CHÍNH SELECTOR MÀ BẠN ĐÃ TÌM THẤY */
    /* Đặt chiều cao tối đa dựa trên chiều cao của cửa sổ trình duyệt (viewport) */
    /* và trừ đi chiều cao của header (phần trên cùng, khoảng 60px).
       Bạn có thể điều chỉnh 60px này cho phù hợp với thiết kế của Quartz. */
    max-height: calc(100vh - 60px) !important;

    /* Buộc thanh cuộn dọc cho toàn bộ sidebar luôn hiển thị */
    overflow-y: scroll !important; 

    /* Đảm bảo vị trí dính và không bị che khuất */
    position: sticky !important; 
    top: 0px !important; 
    bottom: 0px !important; /* Để sidebar kéo dài tới cuối màn hình */

    /* Nếu bạn thấy có padding-top lớn đẩy nội dung xuống (như 96px bạn thấy trước đó),
       có thể cần ghi đè nó nếu top: 0px là mong muốn. */
    /* padding-top: 0 !important; */ 
}

/* BƯỚC 4: Điều chỉnh container của Table of Contents (.toc.desktop-only) */
/* Nhớ rằng nó có overflow-y: hidden, cần ghi đè */
.toc.desktop-only {
    height: auto !important; /* Cho phép nó mở rộng theo nội dung */
    max-height: unset !important; /* Xóa mọi giới hạn max-height */
    overflow: visible !important; /* Cho phép nội dung tràn ra, để cha (sidebar) cuộn */
}

/* BƯỚC 5: Đảm bảo phần tử UL chứa các mục TOC cũng không chặn cuộn */
.toc-content {
    max-height: unset !important; /* Xóa mọi giới hạn chiều cao cũ */
    overflow-y: visible !important; /* Để nó đẩy nội dung cho .sidebar cuộn */

    /* Xóa hiệu ứng làm mờ ở đầu/cuối của mục lục */
    mask-image: none !important;
    -webkit-mask-image: none !important;
}

/* BƯỚC 6: Tùy chỉnh thanh cuộn để làm đẹp và dễ nhìn hơn (quan trọng để gỡ lỗi) */
/* Làm cho chúng nổi bật để bạn có thể thấy chúng rõ ràng */
html::-webkit-scrollbar,
body::-webkit-scrollbar,
.right.sidebar::-webkit-scrollbar, /* Đảm bảo selector này cũng được sử dụng */
.toc-content::-webkit-scrollbar {
  width: 12px; 
  background-color: #f0f0f0; /* Nền của rãnh cuộn */
}
html::-webkit-scrollbar-thumb,
body::-webkit-scrollbar-thumb,
.right.sidebar::-webkit-scrollbar-thumb, /* Đảm bảo selector này cũng được sử dụng */
.toc-content::-webkit-scrollbar-thumb {
  background-color: #888; /* Màu của thanh kéo cuộn */
  border-radius: 6px; 
  border: 2px solid #f0f0f0; /* Tạo border để dễ phân biệt với nền */
}
html::-webkit-scrollbar-track,
body::-webkit-scrollbar-track,
.right.sidebar::-webkit-scrollbar-track, /* Đảm bảo selector này cũng được sử dụng */
.toc-content::-webkit-scrollbar-track {
  background-color: transparent; 
}






/************************************************ custom.css - Styling cho bảng Markdown ************************************************/

/* Áp dụng border cho toàn bộ bảng */
table {
    border-collapse: collapse; /* Gộp các đường biên của ô */
    width: 100%; /* Chiếm toàn bộ chiều rộng có thể */
    margin: 1.5rem 0; /* Khoảng cách trên/dưới bảng */
    font-size: 0.95rem; /* Kích thước chữ nhỏ hơn một chút cho bảng */
    border: 1px solid var(--lightgray); /* Border chung cho bảng */
}

/* Áp dụng border và padding cho tiêu đề cột (th) và ô dữ liệu (td) */
th, td {
    border: 1px solid var(--lightgray); /* Đường kẻ giữa các ô */
    padding: 0.8rem 1rem; /* Khoảng cách nội dung bên trong ô */
    text-align: left; /* Căn lề trái cho nội dung trong ô */
}

/* Định dạng cho tiêu đề cột (th) */
th {
    background-color: var(--lightgray); /* Nền cho hàng tiêu đề */
    color: var(--darkgray); /* Màu chữ cho tiêu đề */
    font-weight: 600; /* In đậm tiêu đề */
}

/* Định dạng cho các hàng chẵn/lẻ (tùy chọn) */
tbody tr:nth-child(even) {
    background-color: var(--light); /* Nền nhẹ hơn cho hàng chẵn */
}

/* Tùy chỉnh hover trên hàng (tùy chọn) */
tbody tr:hover {
    background-color: var(--highlight); /* Đổi màu khi rê chuột qua hàng */
}

/* Loại bỏ border cho hình ảnh trong bảng nếu có (tùy chọn) */
table img {
    border: none;
    box-shadow: none;
}










/************************************************ custom.css - Tùy chỉnh Dark Mode ************************************************/

/* Áp dụng các style này CHỈ khi chế độ Dark Mode được bật */
html[saved-theme="dark"] {
    /*
    // Các biến màu mặc định trong Dark Mode của Quartz (từ quartz.config.ts)
    // --light: #212121;     (Nền tối nhất)
    // --lightgray: #303030; (Nền các khối, border)
    // --gray: #606060;      (Màu chữ phụ, icon)
    // --darkgray: #CCCCCC;  (Màu chữ chính - sáng)
    // --dark: #F0F0F0;      (Màu nền của sidebar/header - sáng hơn)
    // --secondary: #8B5CF6; (Màu nhấn - tím)
    // --tertiary: #84cc16;  (Màu bổ sung - xanh lá)
    // --highlight: rgba(143, 159, 169, 0.15); (Highlight khi chọn text)
    */

    /*
    /* -- TÙY CHỈNH CHỮ IN ĐẬM, IN NGHIÊNG, GẠCH CHÂN -- */
    */

    strong { /* Chữ BÔI ĐEN */
        color: var(--dark); /* Hoặc màu nổi bật hơn như var(--secondary) nếu bạn muốn rất nổi */
        /* font-weight: 700; */ /* Mặc định đã đậm, có thể tăng thêm nếu font cho phép */
    }

    em { /* Chữ IN NGHIÊNG */
        color: var(--darkgray); /* Giữ màu chữ chính hoặc chọn màu khác subtle hơn */
        /* font-style: italic; */ /* Đã mặc định */
    }

    u { /* Chữ GẠCH CHÂN */
        color: var(--secondary); /* Màu nhấn để nổi bật */
        text-decoration-color: var(--secondary); /* Màu của đường gạch chân */
        text-decoration-thickness: 1.5px; /* Độ dày của đường gạch chân */
    }

    /*
    /* -- TÙY CHỈNH HEADING LEVELS (H1, H2, H3,...) -- */
    */

    h1 {
        color: var(--dark); /* Màu sáng nhất hoặc nổi bật nhất cho tiêu đề chính */
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2); /* Thêm hiệu ứng đổ bóng nhẹ cho chữ */
    }

    h2 {
        color: var(--darkgray); /* Giữ màu chữ chính hoặc chọn màu nhấn subtle */
        border-bottom: 1px solid var(--gray); /* Đường kẻ dưới tiêu đề để phân tách */
        padding-bottom: 0.3rem; /* Khoảng cách giữa chữ và đường kẻ */
        margin-top: 2rem; /* Khoảng cách trên tiêu đề */
    }

    h3 {
        color: var(--secondary); /* Màu nhấn cho tiêu đề phụ */
    }

    h4, h5, h6 {
        color: var(--darkgray); /* Giữ màu chữ chính */
        /* text-transform: uppercase; */ /* Chuyển thành chữ in hoa (tùy chọn) */
        /* font-size: 0.9em; */ /* Kích thước nhỏ hơn */
    }

    /*
    /* -- CÁC TÙY CHỈNH KHÁC (ví dụ: liên kết) -- */
    */

    a { /* Liên kết */
        color: var(--secondary); /* Màu tím nổi bật */
        text-decoration: underline; /* Gạch chân cho liên kết */
        text-decoration-color: var(--secondary); /* Màu gạch chân */
        text-decoration-thickness: 1px; /* Độ dày gạch chân */
    }

    a:hover {
        color: var(--tertiary); /* Đổi màu khi rê chuột */
        text-decoration-color: var(--tertiary);
    }

    /*
    /* -- Tùy chỉnh màu nền cho các khối code và trích dẫn trong Dark Mode (Ví dụ) -- */
    */

    pre { /* Khối code */
        background-color: var(--lightgray); /* Nền hơi sáng hơn cho dễ đọc code */
        border-left: 4px solid var(--tertiary); /* Thêm đường kẻ nhấn */
        color: var(--darkgray); /* Màu chữ code */
    }

    blockquote { /* Trích dẫn */
        border-left: 4px solid var(--gray); /* Đường kẻ bên trái */
        color: var(--gray); /* Màu chữ xám hơn */
        background-color: var(--light); /* Nền hơi tối hơn so với nền trang */
    }
}